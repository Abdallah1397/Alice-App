if (self.CavalryLogger) { CavalryLogger.start_js(["mia0BRn"]); }

__d("CometPageCoverSlideshowUpdateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"data",variableName:"input"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPageCoverSlideshowUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverSlideshowSaveResponsePayload",kind:"LinkedField",name:"page_cover_slideshow_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometPageCoverRenderer_page"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPageCoverSlideshowUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverSlideshowSaveResponsePayload",kind:"LinkedField",name:"page_cover_slideshow_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_page_cover_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverVideoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverVideoRenderer",abstractKey:null}],storageKey:'comet_page_cover_renderer(supported:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"])'}],storageKey:null}],storageKey:null}]},params:{id:"4032880400066184",metadata:{},name:"CometPageCoverSlideshowUpdateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometPageCoverVideoUpdateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"data",variableName:"input"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPageCoverVideoUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverVideoSaveResponsePayload",kind:"LinkedField",name:"page_cover_video_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometPageCoverRenderer_page"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPageCoverVideoUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverVideoSaveResponsePayload",kind:"LinkedField",name:"page_cover_video_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_page_cover_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverVideoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverVideoRenderer",abstractKey:null}],storageKey:'comet_page_cover_renderer(supported:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"])'}],storageKey:null}],storageKey:null}]},params:{id:"4161694223894857",metadata:{},name:"CometPageCoverVideoUpdateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PagesCometCoverSlideshowEditorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"pageID"}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"prefilled_slideshow_photos",plural:!0,selections:[c,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PagesCometCoverSlideshowEditorQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCover",kind:"LinkedField",name:"cover",plural:!1,selections:[d],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PagesCometCoverSlideshowEditorQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCover",kind:"LinkedField",name:"cover",plural:!1,selections:[d,c],storageKey:null},c],storageKey:null}]},params:{id:"3726866617422651",metadata:{},name:"PagesCometCoverSlideshowEditorQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PagesCometCoverVideoThumbnailPickerItems_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PagesCometCoverVideoThumbnailPickerItems_video",selections:[{alias:null,args:null,concreteType:"VideoThumbnailsConnection",kind:"LinkedField",name:"video_thumbnails",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoThumbnailsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometPageCoverSlideshowPicker.react",["fbt","ix","CometAspectRatioContainer.react","CometBackgroundImage.react","CometLazyPopoverTrigger.react","CometPressable.react","CometTransientDialogProvider.react","JSResourceForInteraction","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoUploaderContainer.react","TetraCircleButton.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react"),k=180/67,l=b("JSResourceForInteraction")("CometPageCoverSlideshowEditMenu.react").__setRef("CometPageCoverSlideshowPicker.react");function a(a){var c=a.disabled,d=c===void 0?!1:c,e=a.mediaID,f=a.pageID,i=a.slideshowIndex,m=a.uri;c=j.useContext(b("ProfileCometCoverPhotoEditContext"));var n=c.dispatch;a=c.state;var o=a.slideshowData;o=(c=o)!=null?c:[];var p=j.useCallback(function(){var a=[];o.map(function(b){b.mediaID!==e&&a.push(b)});n({slideshowData:a,type:"EDIT_SLIDESHOW"})},[o,n,e]),q=j.useCallback(function(){n({selectedSlideshowIndex:i,type:"CHOOSE_SLIDESHOW"})},[n,i]);a=j.jsx(b("CometTransientDialogProvider.react"),{children:j.jsx(b("ProfileCometCoverPhotoUploaderContainer.react"),{children:function(a){return j.jsx(b("CometLazyPopoverTrigger.react"),{align:"end",popoverProps:{onRemove:p,openFileSelector:a,pageID:f,slideshowIndex:i,uri:m},popoverResource:l,position:"below",children:function(a,c){var e;return j.jsx(b("CometPressable.react"),{"aria-label":g._("Edit Photo"),disabled:d,display:"inline",onPress:q,ref:a,children:j.jsx("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj ljqcmsvz",children:j.jsxs(b("CometAspectRatioContainer.react"),{aspectRatio:k,children:[j.jsx(b("CometBackgroundImage.react"),{src:(e=m)!=null?e:""}),j.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 oaz4zybt i09qtzwb qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj"}),j.jsx("div",{className:"plgsh5y4 pmk7jnqg b5fwa0m2",children:j.jsx(b("TetraCircleButton.react"),{color:"primary",disabled:d,icon:b("fbicon")._(h("477824"),12),label:g._("Edit Photo"),onPress:c,ref:a,size:24})})]})})})}})}})});c=j.jsx(b("CometTransientDialogProvider.react"),{children:j.jsx(b("ProfileCometCoverPhotoUploaderContainer.react"),{children:function(a){return j.jsx(b("CometLazyPopoverTrigger.react"),{align:"start",popoverProps:{onRemove:p,openFileSelector:a,pageID:f,slideshowIndex:i,uri:m},popoverResource:l,position:"below",children:function(a,c){return j.jsx(b("CometPressable.react"),{"aria-label":g._("Edit Photo"),disabled:d,display:"inline",onPress:c,ref:a,children:j.jsx("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj ljqcmsvz",children:j.jsxs(b("CometAspectRatioContainer.react"),{aspectRatio:k,children:[j.jsx("div",{className:"taijpn5t datstx6m cbu4d94t j83agx80 bp9cbjyn",children:d===!1?j.jsx(b("TetraIcon.react"),{color:"primary",icon:b("fbicon")._(h("481773"),16)}):null}),j.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 oaz4zybt i09qtzwb qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj"})]})})})}})}})});return m!==void 0&&m!==""?a:c}}),null);
__d("CometPageCoverSlideshowUpdateMutation",["CometPageCoverSlideshowUpdateMutation.graphql","CometRelay","PagesCometAdminCompletionMeterUtils","PagesCometAdminOnboardingConstants","PagesCometAdminOnboardingUtils","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";f.updatePageCoverSlideshow=a;var g,h=g!==void 0?g:g=b("CometPageCoverSlideshowUpdateMutation.graphql");function a(a,c,d){var e=c.items,f=c.pageID;c=function(a){b("PagesCometAdminCompletionMeterUtils").updateStatusForItemType(a,{actionType:"add_cover_photo",newStatus:"completed",pageID:f}),b("PagesCometAdminOnboardingUtils").updateOnboardingStatusForField(a,{actionItemField:b("PagesCometAdminOnboardingConstants").PAGE_COVER_PHOTO_GRAPHQL_FIELD,newValue:!1,pageID:f})};b("CometRelay").commitMutation(a,babelHelpers["extends"]({mutation:h,optimisticUpdater:c,updater:c,variables:{input:{items:e,page_id:f},scale:b("WebPixelRatio").get()}},d))}}),null);
__d("CometPageCoverVideoPlayer.react",["VideoPlayerDefaultControls.react","VideoPlayerPlaybackControl.react","VideoPlayerRelay.react","VideoPlayerSurface.react","react"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g||b("react");function a(a){var c=a.displayEditButton,d=a.displayPlaybackControl,e=a.shouldLoop;a=a.video;return h.jsx(b("VideoPlayerRelay.react"),{initialForceHD:!0,loopCount:e===!0?-1:0,portalingEnabled:!1,subOrigin:"pages_cover",video:a,children:h.jsx(b("VideoPlayerSurface.react"),{children:c===!0||d===!0?h.jsx(b("VideoPlayerPlaybackControl.react"),{}):h.jsx(b("VideoPlayerDefaultControls.react"),{})})})}}),null);
__d("CometPageCoverVideoUpdateMutation",["CometPageCoverVideoUpdateMutation.graphql","CometRelay","PagesCometAdminCompletionMeterUtils","PagesCometAdminOnboardingConstants","PagesCometAdminOnboardingUtils","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";f.updateCoverVideo=a;var g,h=g!==void 0?g:g=b("CometPageCoverVideoUpdateMutation.graphql");function a(a,c,d){var e=c.containerHeight,f=c.containerWidth,g=c.loopActive,i=c.pageID,j=c.preferredThumbnailID;c=c.videoID;var k=function(a){b("PagesCometAdminCompletionMeterUtils").updateStatusForItemType(a,{actionType:"add_cover_photo",newStatus:"completed",pageID:i}),b("PagesCometAdminOnboardingUtils").updateOnboardingStatusForField(a,{actionItemField:b("PagesCometAdminOnboardingConstants").PAGE_COVER_PHOTO_GRAPHQL_FIELD,newValue:!1,pageID:i})};b("CometRelay").commitMutation(a,babelHelpers["extends"]({mutation:h,optimisticUpdater:k,updater:k,variables:{input:{cover_container_height:e,cover_container_width:f,page_id:i,preferred_thumbnail_id:j,should_cover_video_loop:g,video_id:c},scale:b("WebPixelRatio").get()}},d))}}),null);
__d("PagesCometCoverVideoThumbnailPickerItems.react",["fbt","CometLegacyHScroll.react","CometLegacyHScrollChild.react","CometRelay","PagesCometCoverVideoThumbnailPickerItems_video.graphql","TetraishEntityHeaderCoverMedia.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=i||b("react");function a(a){var c=a.onChange,d=a.onSetThumbnailLength,e=a.onThumbnailIndexChange;a=a.video;a=b("CometRelay").useFragment(h!==void 0?h:h=b("PagesCometCoverVideoThumbnailPickerItems_video.graphql"),a);var f=j.useState(0),i=f[0],k=f[1];f=j.useCallback(function(a){a!==null&&k(a.getBoundingClientRect().width)},[]);a=(a=a==null?void 0:(a=a.video_thumbnails)==null?void 0:a.edges)!=null?a:[];var l=j.useState(0),m=l[0],n=l[1];if(a!=null&&a.length!==0){c((l=a[m].node)==null?void 0:l.id);d(a.length);e(m+1)}c=j.useCallback(function(a){n(a)},[n]);return a!=null?j.jsx("div",{ref:f,children:j.jsx(b("CometLegacyHScroll.react"),{accessibilityLabel:g._("Video Thumbnails"),itemsToScroll:1,onIndexChange:c,snapPosition:"center",children:a.map(function(a,c){var d,e,f,g;d=a==null?void 0:(d=a.node)==null?void 0:d.url;e=(e=a==null?void 0:(e=a.node)==null?void 0:(e=e.image)==null?void 0:e.uri)!=null?e:"";f=(f=a==null?void 0:(f=a.node)==null?void 0:(f=f.image)==null?void 0:f.width)!=null?f:0;g=(g=a==null?void 0:(g=a.node)==null?void 0:(g=g.image)==null?void 0:g.height)!=null?g:0;(f===0||g===0)&&b("recoverableViolation")("Cover photo width / height can not be null, undefined. or 0","pages_consumer_experience_www");return j.jsx(b("CometLegacyHScrollChild.react"),{width:Math.round(i),children:j.jsx(b("TetraishEntityHeaderCoverMedia.react"),{coverMedia:{"aria-label":"Link to open page cover photo",focusX:.5,focusY:.5,height:g,linkProps:d!=null?{url:d}:void 0,mediaSource:e,width:f}})},(d=a==null?void 0:(g=a.node)==null?void 0:g.id)!=null?d:c)})})}):null}}),null);
__d("PagesCometCoverContentRepositioner.react",["fbt","CometMiddot.react","CometPageCoverVideoUpdateMutation","CometRelay","CometToggle.react","PagesCometCoverVideoThumbnailPickerItems.react","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoEditStrings","TetraText.react","TetraishEntityHeaderCoverActionBar.react","TetraishEntityHeaderCoverMedia.react","TetraishEntityHeaderCoverMediaFooter.react","deferredLoadComponent","react","requireDeferred","usePagesCometCoverPhotoUpdateMutation","useProfileCometErrorDialog_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=h||b("react"),j=b("deferredLoadComponent")(b("requireDeferred")("CometPageCoverVideoPlayer.react").__setRef("PagesCometCoverContentRepositioner.react"));function a(a){var c,d=a.containerHeight,e=a.containerWidth,f=a.pageID,h=b("CometRelay").useRelayEnvironment();a=i.useContext(b("ProfileCometCoverPhotoEditContext"));var k=a.dispatch;a=a.state;var l=a.coverPhoto;a=b("useProfileCometErrorDialog_DEPRECATED")(b("ProfileCometCoverPhotoEditStrings").SAVE_FAILED);var m=a[0];a=i.useState(!1);var n=a[0],o=a[1];a=i.useState({x:(a=l==null?void 0:l.focusX)!=null?a:.5,y:(a=l==null?void 0:l.focusY)!=null?a:.5});var p=a[0],q=a[1];a=i.useCallback(function(a,b){q({x:a,y:b})},[]);var r=i.useCallback(function(){k({type:"REPOSITION_CANCEL"})},[k]),s=l==null?void 0:l.video,t=l==null?void 0:l.thumbnails,u=i.useState(!0),v=u[0],w=u[1];u=function(){w(!v)};var x=g._("Automatically replay video in a loop"),y=i.useState(!1),z=y[0],A=y[1];y=i.useState(null);var B=y[0],C=y[1];y=i.useCallback(function(a){C(a)},[]);var D=i.useState(1),E=D[0],F=D[1];D=i.useCallback(function(a){F(a)},[]);var G=i.useState(0),H=G[0],I=G[1];G=i.useCallback(function(a){I(a)},[]);var J=b("usePagesCometCoverPhotoUpdateMutation")(),K=i.useCallback(function(){var a;o(!0);s!=null?b("CometPageCoverVideoUpdateMutation").updateCoverVideo(h,{containerHeight:(a=d)!=null?a:0,containerWidth:(a=e)!=null?a:0,loopActive:v,pageID:f,preferredThumbnailID:B,videoID:(a=l==null?void 0:l.id)!=null?a:""},{onCompleted:function(){k({type:"REPOSITION_CANCEL"})},onError:function(a){m(a),k({type:"REPOSITION_CANCEL"})}}):J(function(){k({type:"REPOSITION_CANCEL"})},function(a){m(a),k({type:"REPOSITION_CANCEL"})},p.x,p.y,f,(a=l==null?void 0:l.id)!=null?a:"")},[d,e,l,k,h,p.x,p.y,v,f,m,B,s,J]);c=s!=null?{height:0,mediaSource:i.jsx(j,{displayPlaybackControl:!0,shouldLoop:!0,video:s}),width:0}:{focusX:p.x,focusY:p.y,height:(c=l==null?void 0:l.height)!=null?c:0,mediaSource:(c=l==null?void 0:l.uri)!=null?c:"",width:(c=l==null?void 0:l.width)!=null?c:0};y=t!=null?i.jsx(b("PagesCometCoverVideoThumbnailPickerItems.react"),{onChange:y,onSetThumbnailLength:G,onThumbnailIndexChange:D,video:t}):null;return i.jsx(b("TetraishEntityHeaderCoverMedia.react"),{backgroundMedia:{focusX:p.x,focusY:p.y,height:(G=l==null?void 0:l.height)!=null?G:0,uri:(D=l==null?void 0:l.blurredURI)!=null?D:"",width:(G=l==null?void 0:l.width)!=null?G:0},coverActionBar:i.jsx(b("TetraishEntityHeaderCoverActionBar.react"),{confirmLabel:t!=null&&!z?g._("Next"):b("ProfileCometCoverPhotoEditStrings").REPOSITION_SAVE,description:s!=null?i.jsxs("div",{className:"df5l467t j83agx80 bp9cbjyn",children:[i.jsx(b("TetraText.react"),{color:"white",type:"headline4",children:x}),i.jsx("div",{className:"ozuftl9m j83agx80",children:i.jsx(b("CometToggle.react"),{onClick:u,size:"small",value:v,children:x})})]}):null,disabled:n,onCancel:r,onConfirm:t!=null&&!z?function(){return A(!0)}:K}),coverFooter:y!==null&&z?i.jsx(b("TetraishEntityHeaderCoverMediaFooter.react"),{footer:i.jsxs(b("TetraText.react"),{color:"white",type:"bodyLink4",children:[g._("Choose a Thumbnail Image for Your Video"),i.jsx(b("CometMiddot.react"),{}),g._({"*":"{the index of the current thumbnail} \/ {the total number of thumbnails} Thumbnails","_1":"{the index of the current thumbnail} \/ {the total number of thumbnails} Thumbnail"},[g._param("the index of the current thumbnail",E),g._param("the total number of thumbnails",H),g._plural(H)])]}),footerAlign:"end"}):null,coverMedia:y!==null&&z?{height:0,mediaSource:y,width:0}:c,isDraggable:!n&&s==null,onDrag:a})}}),null);
__d("PagesCometCoverSlideshowEditor.react",["fbt","CometDraggableList.react","CometErrorBoundary.react","CometLegacyHScroll.react","CometLegacyHScrollChild.react","CometPageCoverSlideshowPicker.react","CometPageCoverSlideshowUpdateMutation","CometRelay","CometToggle.react","PagesCometCoverSlideshowEditorQuery.graphql","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoEditStrings","TetraText.react","TetraishEntityHeaderCoverActionBar.react","TetraishEntityHeaderCoverMedia.react","promiseDone","react","recoverableViolation","stylex","useCometAlertDialog","useCometConfirmationDialog","useProfileCometErrorDialog_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j,k=i||b("react"),l="/images/pages/finch/cover_placeholder-2x.png",m=5,n="empty_id",o={editBar:{display:"j83agx80",marginBottom:"bi6gxh9e",marginEnd:"o22cckgh",marginTop:"aov4n071",width:"k4urcfbm"},editBarItem:{marginEnd:"oi9244e8",width:"p8szoze4"},fullWidth:{width:"k4urcfbm"},toggle:{alignItems:"bp9cbjyn",display:"j83agx80",width:"m6gxxk8c"},toggleButton:{display:"j83agx80",marginStart:"ozuftl9m"}};function a(a){var c,d=a.containerHeight,e=a.containerWidth,f=a.pageID;a=k.useContext(b("ProfileCometCoverPhotoEditContext"));var i=a.dispatch,p=a.state;a=k.useMemo(function(){return{dispatch:i,state:p}},[i,p]);var q=p.coverPhoto,r=p.selectedSlideshowIndex,s=p.slideshowData;s=(c=s)!=null?c:[];c=k.useState(0);var t=c[0],u=c[1];c=k.useCallback(function(a){a!=null&&u(a.getBoundingClientRect().width)},[]);var v=b("useProfileCometErrorDialog_DEPRECATED")(b("ProfileCometCoverPhotoEditStrings").SAVE_FAILED_DEFAULT),w=v[0],x=k.useCallback(function(a){a!==r&&i({selectedSlideshowIndex:a,type:"CHOOSE_SLIDESHOW"})},[i,r]),y={x:.5,y:.5},z=h!==void 0?h:h=b("PagesCometCoverSlideshowEditorQuery.graphql");v=k.useState(!1);var A=v[0],B=v[1];v=k.useState(s);var C=v[0],D=v[1];v=function(){!A?(i({type:"EDIT_SLIDESHOW_STARTED"}),b("promiseDone")(b("CometRelay").fetchQuery(F,z,{pageID:f}).toPromise().then(function(a){a=(a=a==null?void 0:(a=a.page)==null?void 0:(a=a.cover)==null?void 0:a.prefilled_slideshow_photos)!=null?a:[];var b=[];a.map(function(a){var c;b.push({focus:y,image:{height:(c=a==null?void 0:(c=a.image)==null?void 0:c.height)!=null?c:0,uri:(c=a==null?void 0:(c=a.image)==null?void 0:c.uri)!=null?c:l,width:(c=a==null?void 0:(c=a.image)==null?void 0:c.width)!=null?c:0},mediaID:(c=a.id)!=null?c:""})});i({slideshowData:b,type:"EDIT_SLIDESHOW"});D(s)}))):(i({slideshowData:C,type:"EDIT_SLIDESHOW"}),D(s)),B(!A)};var E=g._("Let Facebook Choose Photos"),F=b("CometRelay").useRelayEnvironment(),G=b("useCometConfirmationDialog")(),H=G[0];G=k.useCallback(function(){H({body:g._("If you go back, your changes won't be saved."),cancel:g._("Cancel"),confirm:g._("Leave Slideshow"),title:g._("Leave Slideshow?")},function(){i({type:"EDIT_SLIDESHOW_CANCEL"})})},[i,H]);var I=b("useCometAlertDialog")(),J=I[0];I=k.useCallback(function(){i({type:"EDIT_SLIDESHOW_STARTED"});var a=[];s.map(function(b){if(b.mediaID!=null&&b.mediaID!==n){var c;a.push({focus:{x:(c=(c=b.focus)==null?void 0:c.x)!=null?c:y.x,y:(c=(c=b.focus)==null?void 0:c.y)!=null?c:y.y},id:b.mediaID})}});if(a.length===0){J({body:g._("To save your slideshow, first add photos. To delete your cover photo, return to your Page and select Remove in the cover area."),title:g._("Slideshow Not Saved")});i({type:"EDIT_SLIDESHOW_CANCEL"});return}b("CometPageCoverSlideshowUpdateMutation").updatePageCoverSlideshow(F,{items:a,pageID:f},{onCompleted:function(){i({type:"EDIT_SLIDESHOW_CANCEL"})},onError:function(a){w(a),i({type:"EDIT_SLIDESHOW_CANCEL"})}})},[y,i,F,f,J,w,s]);q={focus:{x:y.x,y:y.y},image:{height:q==null?void 0:q.height,uri:q==null?void 0:q.uri,width:q==null?void 0:q.width},mediaID:n};(s===null||s.length===0)&&(s=[q]);q=!1;var K=k.useCallback(function(a,b){if(r!=null&&r<s.length){var c;s[(c=r)!=null?c:0].focus={x:a,y:b}}i({slideshowData:s,type:"EDIT_SLIDESHOW"})},[i,r,s]);c=k.jsx("div",{ref:c,children:k.jsx(b("CometLegacyHScroll.react"),{accessibilityLabel:g._("Page Cover Slideshow"),itemsToScroll:1,onIndexChange:x,snapPosition:"center",startIndex:((c=r)!=null?c:0)===s.length?null:r,children:s.map(function(a,c){var f,h,i,j;f=(f=a==null?void 0:(f=a.image)==null?void 0:f.uri)!=null?f:l;h=(h=a==null?void 0:(h=a.image)==null?void 0:h.width)!=null?h:d;i=(i=a==null?void 0:(i=a.image)==null?void 0:i.height)!=null?i:e;(a==null?void 0:a.mediaID)===n&&(q=!0);(h===0||i===0)&&b("recoverableViolation")("Cover photo width / height can not be null, undefined. or 0","pages_consumer_experience_www");var m=a==null?void 0:a.focus;return k.jsx(b("CometLegacyHScrollChild.react"),{width:Math.round(t),children:k.jsx(b("TetraishEntityHeaderCoverMedia.react"),{coverMedia:{"aria-label":g._("Edit Photo"),focusX:(j=m==null?void 0:m.x)!=null?j:.5,focusY:(j=m==null?void 0:m.y)!=null?j:.5,height:(m=i)!=null?m:0,mediaSource:f,width:(j=h)!=null?j:0},isDraggable:!0,onDrag:function(a,b){x(c),K(a,b)}})},(a==null?void 0:a.mediaID)!=null?(a==null?void 0:a.mediaID)+c:c)})})});c={height:0,mediaSource:c,width:0};var L=[];s.length<m&&q===!1&&L.push({image:null,mediaID:n});while(s.length+L.length<m)L.push(null);L=s.concat(L);var M=!1;L=L.map(function(a,c){var d;d=k.jsx("div",{className:(j||(j=b("stylex")))(o.editBarItem),children:k.jsx(b("CometErrorBoundary.react"),{children:k.jsx(b("CometPageCoverSlideshowPicker.react"),{disabled:M||p.isUploading,mediaID:a==null?void 0:a.mediaID,pageID:f,slideshowIndex:c,uri:a==null?void 0:(d=a.image)==null?void 0:d.uri})})},(a==null?void 0:a.mediaID)!=null?(a==null?void 0:a.mediaID)+c:c);M===!1&&(a==null?void 0:a.mediaID)===n&&(M=!0);return d});var N=function(a,b,c){if(b>=s.length||c>=s.length)return;s.splice(c,0,s.splice(b,1)[0]);i({slideshowData:s,type:"EDIT_SLIDESHOW"})};L=k.jsx("div",{className:(j||(j=b("stylex")))(o.editBar),children:k.jsx(b("CometDraggableList.react"),{direction:"horizontal",expanded:!0,items:L,onReorder:N,xstyle:o.fullWidth})});return k.jsx(b("ProfileCometCoverPhotoEditContext").Provider,{value:a,children:k.jsx(b("TetraishEntityHeaderCoverMedia.react"),{coverActionBar:k.jsx(b("TetraishEntityHeaderCoverActionBar.react"),{confirmLabel:b("ProfileCometCoverPhotoEditStrings").REPOSITION_SAVE,description:k.jsxs("div",{className:j(o.toggle),children:[k.jsx(b("TetraText.react"),{color:"white",type:"headline4",children:E}),k.jsx("div",{className:j(o.toggleButton),children:k.jsx(b("CometToggle.react"),{disabled:p.isUploading,onClick:v,size:"small",value:A,children:E})})]}),disabled:p.isUploading,onCancel:G,onConfirm:I}),coverHeader:L,coverMedia:c})})}}),null);